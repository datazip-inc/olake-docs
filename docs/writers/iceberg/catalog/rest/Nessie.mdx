---
title: Nessie
description: Nessie REST Catalog configuration
---

The **REST Nessie Catalog** integrates [Project Nessie](https://projectnessie.org/) as the catalog for Apache Iceberg using the REST Catalog API.

Unlike the Generic REST Catalog, Nessie adds Git-like version control for data, enabling branching, tagging, and reproducible queries across multiple engines.

### Prerequisites
Required services:
  - **Object store** – e.g., S3, MinIO, or another S3-compatible storage for table data and metadata.
  - **Metadata database** – typically PostgreSQL, with a dedicated database and user for Iceberg + Nessie.
  - **Nessie REST Service** – a Nessie deployment that provides the REST catalog API along with versioning features

<br/>

### Configuration

<Tabs>

  <TabItem value="nessie-ui" label="OLake UI" default>

    In the OLake UI, go to the **Destinations** page and click **+ Create Destination**. From the list of connectors, choose **Iceberg**. In the configuration form that appears, select **REST** as the catalog type and fill in the required details.

    <div className='flex justify-center w-2/3 mx-auto'>
      ![Nessie UI Configuration](/img/docs/iceberg/catalog/rest/rest-config.jpeg)
    </div>

    - **Nessie Configuration Parameters:**

    | Parameter        | Sample Value                            | Description                                                                                     |
    |------------------|-----------------------------------------|-------------------------------------------------------------------------------------------------|
    | REST Catalog URI | `http://<REST_HOSTNAME>:19120/iceberg/` | Specifies the endpoint URL for the Nessie REST catalog service that the writer will connect to. |
    | Iceberg S3 Path  | `s3://<BUCKET_NAME>`                    | Determines the S3 path or storage location for Iceberg data in the warehouse bucket.            |
    | Iceberg Database | `iceberg_db`                            | Specifies the name of the Iceberg database that will be used by the destination configuration.  |
    | S3 Endpoint      | `http://<S3_ENDPOINT>:9000`             | Endpoint for the  S3-compatible service.                                                        |
    | AWS Region       | `us-east-1`                             | Specifies the AWS region associated with the S3 bucket where the data is stored.                |
    | AWS Access Key   | `<S3_ACCESS_KEY>`                       | S3 access key for authentication.                                                               |
    | AWS Secret Key   | `<S3_SECRET_KEY>`                       | S3 secret key for authentication.                                                               |


    - **Authentication Fields (optional):**
    
    | Parameter                | Sample Value                        | Description                                                                                                   |
    |--------------------------|-------------------------------------|---------------------------------------------------------------------------------------------------------------|
      | Token                    | `abc...xyz`                          | Specifies the Bearer token sent in the Authorization header for authenticating with the REST catalog service. |
    | OAuth2 Auth URI          | `https://auth.server.com/oauth/token` | OAuth2 server URI for OAuth2 authentication.                                                                  |
    | REST Auth Type           | `oauth2`                              | Authentication type (e.g., "oauth2").                                                                         |
    | Credential (OAuth2)      | `your_id:your_secret`                 | Specifies the client ID and secret for OAuth2, formatted as client_id:client_secret.                          |
    | Scope (OAuth2)           | `api.read api.write`                  | OAuth2 scopes (space-separated).                                                                              |
    | REST Signing Name        | `s3tables`                            | Service name for AWS Signature V4 (e.g., "s3tables").                                                         |
    | REST Signing Region      | `us-east-1`                           | Region for AWS Signature V4 signing.                                                                          |
    | REST Enable Signature V4 | `true`                              | Enable AWS Signature V4 signing (boolean).                                                                    |
      | Disable Primary Keys     | `false`                             | Needed to set `true` for Databricks Unity Catalog as it doesn't support identifier fields                     |

    <br/>

  </TabItem>

  <TabItem value="nessie-cli" label="OLake CLI">

    To connect to Iceberg using Nessie as the catalog, create `destination.json` with the following configuration:
    ```json title="destination.json"
    {
      "type": "ICEBERG",
      "writer": {
        "catalog_type": "rest",
          "rest_catalog_url": "http://localhost:19120/iceberg/",
          "iceberg_s3_path": "warehouse",
          "iceberg_db": "olake_db",
          "s3_endpoint": "http://localhost:9000/",
          "aws_access_key": "minio",
          "aws_secret_key": "minio123", 
          "aws_region": "us-east-1"
      }
    }
    ```

    - #### Nessie Configuration Parameters
    | Parameter        | Sample Value                            | Description                                                                                                    |
    |------------------|-----------------------------------------|----------------------------------------------------------------------------------------------------------------|
    | catalog_type     | `rest`                                  | Defines the catalog type used by the writer. "rest" means the writer interacts with a RESTful catalog service. |
    | rest_catalog_url | `http://<REST_HOSTNAME>:19120/iceberg/` | Specifies the endpoint URL for the Nessie REST catalog service that the writer will connect to.                |
    | iceberg_s3_path  | `s3://<BUCKET_NAME>`                    | Determines the S3 path or storage location for Iceberg data in the warehouse bucket.                           |
    | iceberg_db       | `iceberg_db`                            | Specifies the name of the Iceberg database that will be used by the destination configuration.                 |
    | s3_endpoint      | `http://<S3_ENDPOINT>:9000/`            | Endpoint for the MinIO S3-compatible service.                                                                  |
    | aws_access_key   | `<S3_ACCESS_KEY>`                       | MinIO access key for authentication.                                                                           |
    | aws_secret_key   | `<S3_SECRET_KEY>`                       | MinIO secret key for authentication.                                                                           |
    | aws_region       | `us-east-1`                             | Specifies the AWS region associated with the S3 bucket where the data is stored.                               |


    - #### Authentication Fields (optional):
    | Parameter                | Sample Value                        | Description                                                                                                   |
    |--------------------------|-------------------------------------|---------------------------------------------------------------------------------------------------------------|
      | token                    | `abc...xyz`                           | Specifies the Bearer token sent in the Authorization header for authenticating with the REST catalog service. |
      | oauth2_uri               | `https://auth.server.com/oauth/token` | OAuth2 server URI for OAuth2 authentication.                                                                  |
      | rest_auth_type           | `oauth2`                              | Authentication type (e.g., "oauth2").                                                                         |
      | credential               | `your_id:your_secret`                 | Specifies the client ID and secret for OAuth2, formatted as client_id:client_secret.                          |
      | scope                    | `api.read api.write`                  | OAuth2 scopes (space-separated).                                                                              |
      | rest_signing_name        | `s3tables`                            | Service name for AWS Signature V4 (e.g., "s3tables").                                                         |
      | rest_signing_region      | `us-east-1`                           | Region for AWS Signature V4 signing.                                                                          |
    | rest_signing_v_4         | `true`                              | Enable AWS Signature V4 signing (boolean).                                                                    |
    | no_identifier_fields     | `false`                             | Needed to set `true` for Databricks Unity Catalog as it doesn't support identifier fields                     |

  </TabItem>

</Tabs>

<br/>

### Querying Data

Once the data is synced successfully, you can query the Iceberg tables from any supported query engine using the following query:

<CatalogQuery />

<br/>

### Troubleshooting

- **Invalid Reference (Branch/Tag not found)** – Make sure the branch (e.g., `main`) exists before running a sync.
- **Commit Conflicts** – If multiple writers update the same table, Nessie may reject the commit. Retry after pulling the latest state.
- **Catalog URI Misconfiguration** – A missing or incorrect API path (e.g., `/api/v2`) often causes connection errors. Double-check the endpoint.

<br/>

### Setup For Local Testing

Save the following as `docker-compose.yml`: which will start the services required for a Nessie REST Catalog:
1. **Nessie REST Service** – Provides the REST API for managing Iceberg tables with version control.
2. **PostgreSQL** – Stores Nessie's metadata and catalog state.
3. **MinIO + MinIO Client** – An S3-compatible object store used to store table data and snapshots.

```yml title="docker-compose.yml"
services:
  nessie:
    image: ghcr.io/projectnessie/nessie:latest
    container_name: nessie
    ports:
      - "19120:19120"
    environment:
      - nessie.version.store.type=JDBC
      - quarkus.datasource.db-kind=postgresql
      - quarkus.datasource.jdbc.url=jdbc:postgresql://postgres:5432/nessie_db
      - quarkus.datasource.username=nessie
      - quarkus.datasource.password=nessie
      - nessie.catalog.default-warehouse=warehouse
      - nessie.catalog.warehouses.warehouse.location=s3://warehouse/
      - nessie.catalog.service.s3.default-options.region=us-east-1
      - nessie.catalog.service.s3.default-options.path-style-access=true
      - nessie.catalog.service.s3.default-options.endpoint=http://minio:9000/
      - nessie.catalog.service.s3.default-options.external-endpoint=http://localhost:9000/
      - nessie.catalog.service.s3.default-options.access-key=urn:nessie-secret:quarkus:nessie.catalog.secrets.access-key
      - nessie.catalog.secrets.access-key.name=minio
      - nessie.catalog.secrets.access-key.secret=minio123
    depends_on:
      postgres:
        condition: service_healthy
      mc:
        condition: service_completed_successfully
    networks:
      - nessie-network

  minio:
    image: quay.io/minio/minio:RELEASE.2025-07-18T21-56-31Z
    container_name: minio
    ports:
      - "9000:9000"
      - "9090:9090"
    environment:
      MINIO_ROOT_USER: minio
      MINIO_ROOT_PASSWORD: minio123
      MINIO_ADDRESS: ":9000"
      MINIO_CONSOLE_ADDRESS: ":9090"
    volumes:
      - minio-data:/data
    command: server /data
    networks:
      - nessie-network
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:9000/minio/health/live || exit 1"]
      interval: 5s
      timeout: 2s
      retries: 15

  mc:
    image: quay.io/minio/minio:RELEASE.2025-07-18T21-56-31Z
    container_name: mc
    depends_on:
      minio:
        condition: service_healthy
    entrypoint: /bin/bash
    restart: "no"
    command: >
      -c "mc alias set myminio http://minio:9000/ minio minio123 && 
          mc mb myminio/warehouse --ignore-existing"
    networks:
      - nessie-network

  postgres:
    image: postgres:15
    container_name: postgres
    environment:
      POSTGRES_USER: nessie
      POSTGRES_PASSWORD: nessie
      POSTGRES_DB: nessie_db
    ports:
      - "5432:5432"
    volumes:
      - postgres-data:/data
    networks:
      - nessie-network
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U nessie"]
      interval: 5s
      timeout: 2s
      retries: 10

volumes:
  minio-data:
  postgres-data:

networks:
  nessie-network:
    driver: bridge
```

Start the services:

```bash
docker-compose up -d
```

:::note
All services involved in the sync — OLake, Nessie, MinIO, and Postgres — must run in the **same Docker network**.
::: 