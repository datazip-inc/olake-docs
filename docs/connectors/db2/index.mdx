---
title: "OLake DB2 Connector | Data Sync & Troubleshooting"
description: Learn to configure OLake DB2 Connector for full refresh and incremental sync; learn prerequisites, connection setup, data mapping, and troubleshooting.
sidebar_label: DB2 LUW
---

import Head from '@docusaurus/Head';

import DateTimeHandling from '@site/src/components/DateTimeHandling';

# Overview {#overview}

The OLake DB2 LUW (Linux Unix Windows) Source connector supports multiple synchronization modes. It offers features like parallel chunking, checkpointing, and automatic resume for failed full loads. This connector can be used within the OLake UI or run locally via Docker for open-source workflows.

## Sync Modes Supported

- **Full Refresh**
- **Incremental**

## Prerequisites

### Version Prerequisites
        
- DB2 Version 11.5.3 or higher.

### Connection Prerequisites

- Read access to the tables for the DB2 user.

:::danger
IBM Data Server ODBC and CLI driver is **not supported** for **Linux (arm64)**. Avoid using this machine for DB2 workloads.
:::

**After initial Prerequisites are fulfilled, the configurations for DB2 can be configured.**

---

## Configuration {#configuration}

<Tabs>

<TabItem value="ui" label="Use Olake UI for DB2" default>

### 1. Navigate to the Source Configuration Page

1. Complete the [OLake UI Setup Guide](/docs/getting-started/olake-ui)
2. After logging in to the OlakeUI, select the `Sources` tab from the left sidebar.
3. Click **`Create Source`** on the top right corner.
4. Select **DB2** from the connector dropdown.
5. Provide a name for this source.

### 2. Provide Configuration Details

- Enter DB2 credentials.
  <div className='flex w-full justify-center'>
    <div className='w-3/5'>![Form for creating a DB2 source in OLake, showing fields for endpoint configuration, authentication, and connection options](/img/docs/sources/postgres/postgres-config.webp)</div>
  </div>

| Field                               | Description                                                                                                                                                                   | Example Value                                                                                            |
| ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------- |
| DB2 Host `required`                 | Hostname or IP address of the DB2 database server.                                                                                                                            | `DB2 LUW-host`                                                                                           |
| DB2 Port `required`                 | TCP port on which the DB2 listener is accepting connections.                                                                                                                  | `50000`                                                                                                  |
| Database Name `required`            | The name of the target database to connect to.                                                                                                                                | `olake-db`                                                                                               |
| Password `required`                 | The password corresponding to the provided username for authentication.                                                                                                       | `db2pwd`                                                                                                 |
| Username `required`                 | Database user used to authenticate the connection.                                                                                                                            | `db2-user`                                                                                               |                                                                               
| Max Threads                         | Maximum number of worker threads the connector can spin up for parallel tasks.                                                                                                | `10`                                                                                                     |
| JDBC URL Parameters                 | Extra [JDBC URL parameters](https://jdbc.postgresql.org/documentation/use/) for fine-tuning the connection.                                                                   | `{"connectTimeout":"20"}`                                                                                |
| SSL Mode                            | SSL configuration for the database connection. Contains details such as the SSL mode.                                                                                         | `disable`                                                                                                |
| SSH Config                          | Configure OLake to connect through an SSH tunnel. See [SSH Config details](/docs/understanding/terminologies/olake#1-ssh-configuration) for the list of supported parameters. | <ul> <li>`No Tunnel`</li> <li>`SSH Key Authentication`</li> <li>`SSH Password Authentication`</li> </ul> |
| Retry Count                         | Number of times the retry will take place incase of timeout before failing the sync.                                                                                          | `3`                                                                                                      | 

### 3. Test Connection

- Once the connection is validated, the DB2 source is created. Jobs can then be configured using this source.

- In case of connection failure, refer to the [Troubleshooting section](#troubleshooting).

</TabItem>

<TabItem value="cli" label="Use Olake CLI for DB2">

### 1. Create Configuration File

    - Once the Olake CLI is setup, create a folder to store configuration files such as `source.json` and `destination.json`.

    The `source.json` file for DB2 must contain these mandatory fields.

### 2. Provide Configuration Details

An example `source.json` file will look like this:

<DB2SourceConfig />

| Field                               | Description                                                                                                                                                                   | Example Value                                                                                            | Type   |
| ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------- | ------ |
| DB2 Host `required`                 | Hostname or IP address of the DB2 database server.                                                                                                                            | `DB2 LUW-host`                                                                                           | String |
| DB2 Port `required`                 | TCP port on which the DB2 listener is accepting connections.                                                                                                                  | `50000`                                                                                                  | Integer |
| Database Name `required`            | The name of the target database to connect to.                                                                                                                                | `olake-db`                                                                                               | String |
| Password `required`                 | The password corresponding to the provided username for authentication.                                                                                                       | `db2pwd`                                                                                                 | String |
| Username `required`                 | Database user used to authenticate the connection.                                                                                                                            | `db2-user`                                                                                               | String |                                                                              
| Max Threads                         | Maximum number of worker threads the connector can spin up for parallel tasks.                                                                                                | `10`                                                                                                     | Integer |
| JDBC URL Parameters                 | Extra [JDBC URL parameters](https://jdbc.postgresql.org/documentation/use/) for fine-tuning the connection.                                                                   | `{"connectTimeout":"20"}`                                                                                | Object |
| SSL Mode                            | SSL configuration for the database connection. Contains details such as the SSL mode.                                                                                         | `disable`                                                                                                | Object |
| SSH Config                          | Configure OLake to connect through an SSH tunnel. See [SSH Config details](/docs/understanding/terminologies/olake#1-ssh-configuration) for the list of supported parameters. | <ul> <li>`No Tunnel`</li> <li>`SSH Key Authentication`</li> <li>`SSH Password Authentication`</li> </ul> | Object |
| Retry Count                         | Number of times the retry will take place incase of timeout before failing the sync.                                                                                          | `3`                                                                                                      | Integer |

Similarly, `destination.json` file can be created inside this folder. For more information, see destination documentation.

### 3. Check Source Connection

To verify the database connection following command needs to be run:

```bash title="check command"
docker run --pull=always \
-v "[PATH_OF_CONFIG_FOLDER]:/mnt/config" \
olakego/source-db2:latest \
check \
--config /mnt/config/source.json
```

:::note
When you run any OLake commands using `.buildsh`, the IBM Data Server ODBC and CLI driver gets automatically installed on your system.
:::

- If OLake is able to connect with DB2 `{"connectionStatus":{"status":"SUCCEEDED"},"type":"CONNECTION_STATUS"}` response is returned.

- In case of connection failure, refer to the [Troubleshooting section](#troubleshooting).

</TabItem>
</Tabs>

---

## Data Type Mapping {#data-type-mapping}

<DB2ToIcebergDatatypes />

:::info
- OLake always ingests timestamp data in UTC format, independent of the source timezone.
- For LOB (CLOB, DBCLOB, BLOB) and XML columns, DB2 skips these columns when collecting distribution statistics when running `RUNSTATS` on tables which might result in irregular row size estimates.
:::

---

## Date and Time Handling

<DateTimeHandling />

---

## Troubleshooting {#troubleshooting}

### 1. Schema Changes in Source Tables

If you modify the schema of source tables that are present in your selected streams (such as adding a column, deleting a column, or changing the data type of existing columns), you may encounter errors when running the sync again.

To resolve this issue, you need to run the following command in your **DB2 source database** before running the sync:

```sql
REORG TABLE TABLESCHEMA.TABLENAME
```

Replace `TABLESCHEMA` with your actual table schema and `TABLENAME` with your actual table name.

After running the `REORG TABLE` command, you can run the sync again and it should complete successfully.


