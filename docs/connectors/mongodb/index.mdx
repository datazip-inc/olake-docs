---
title: MongoDB
description: OLake MongoDB Connector
---

# MongoDB Source Documentation

## Overview

The MongoDB Source connector enables you to extract data from MongoDB databases and sync it to your destination systems using OLake. This connector supports both full data synchronization and incremental/CDC (Change Data Capture) modes to efficiently replicate your MongoDB data.

## Sync Mode Supported

- **Full Sync**: Complete data extraction from MongoDB collections
- **Incremental Sync**: Captures only new or modified records since the last sync
- **CDC (Change Data Capture)**: Real-time capture of database changes using MongoDB's oplog

## Prerequisites

### Version Prerequisites

- **Docker**: Latest stable version
- **Docker Compose**: Latest stable version (required only for local MongoDB containers)
   > Required only if you are running MongoDB locally using containers.  
   > If you are using **MongoDB Atlas**, Docker/Docker Compose are **not required**.
- **OLake Docker Image**: `olakego/source-mongodb:latest`

### CDC Prerequisites

For CDC mode, MongoDB must meet the following requirements:
- MongoDB must be running in **replica set mode** (`--replSet rs0`)
- **Oplog must be enabled** (automatic in replica sets)
- User account must have:
  - `readWrite` role on your target database
  - `read` role on the local database (to access oplog)

‚ö†Ô∏è **Important**: CDC in OLake is not a continuous always-on process. It requires execution through the **Orchestrator**.

**To set up MongoDB for CDC, please refer to the [MongoDB and Atlas CDC Setup](/docs/connectors/mongodb/cdc_setup) guide.**

### Any Other Prerequisites

- **MongoDB Instance** - Choose one of the following:
  - Self-hosted MongoDB (local or remote instance)
  - MongoDB Atlas (managed MongoDB cluster)

üí° **Note:** If you don‚Äôt have access to enable CDC (replica sets + oplog), OLake also supports **Incremental sync**.
- Use Incremental mode if CDC is not available in your MongoDB environment.  
- This allows you to still capture data changes, but without relying on oplog.

**After initial Prerequisites are fullfilled, the configurations for MongoDB can be configured.**

---

## Configuration

<Tabs>

<TabItem value="ui" label="Configure MongoDB on OLake UI" default>

#### Step 1: Navigate To Source Configuration Page

1. Complete the [OLake UI Setup Guide](/docs/getting-started/olake-ui)
2. Login to the OLake UI
3. Navigate to **Sources ‚Üí + Create Source**
4. Select **MongoDB** from the connector list
5. Fill in the connection details
6. Save changes

The following image shows the Olake UI configuration screen. Use it as a reference to provide MongoDB connection details when creating the source:

![Olake UI MongoDB Source Setup](/img/connectors/mongodb/mongodb-ui-setup.png)

#### Step 2: Configure Configuration

| Field | Description | Example Value | Data Type |
|-------|-------------|---------------|-----------|
| `hosts` | List of MongoDB hosts. Use DNS SRV format if `srv = true` | `x.xxx.xxx.120:27017`, `x.xxx.xxx.133:27017` (multiple hosts supported) | STRING[] |
| `username` | MongoDB authentication username | `"test"` | STRING |
| `password` | MongoDB authentication password | `"test"` | STRING |
| `authdb` | Authentication database name | `"admin"` | STRING |
| `replica_set` | Name of the replica set (if applicable) | `"rs0"` | STRING |
| `read_preference` | MongoDB read preference setting | `"secondaryPreferred"` | STRING |
| `srv` | Enable DNS SRV connection strings. When `true`, only one host allowed in `hosts` field | `true` or `false` | BOOLEAN |
| `database` | Target MongoDB database name to replicate | `"database_name"` | STRING |
| `max_threads` | Maximum parallel threads for chunk-based snapshotting | `5` | INTEGER |
| `backoff_retry_count` | Number of retry attempts with exponential backoff (1, 2, 4, 8, 16 minutes). Defaults to 3 if set to -1 | `4` | INTEGER |
| `chunking_strategy` | Data chunking strategy for backfill: `timestamp` (time-based), `bucket_auto` (MongoDB's $bucketAuto), `splitVector` (built-in command). Defaults to `splitVector` if empty | `"timestamp"` | STRING |

#### Step 3: Test Connection & Save

1. Click **Test Connection** to verify your configuration
2. If the test succeeds, click **Save** to create the source

‚ö†Ô∏è **Important**: If errors occur during testing, refer to the **Troubleshooting** section below

</TabItem>

<TabItem value="cli" label="Configure MongoDB on OLake CLI">

#### Step 1: Create Configuration File

Create a directory for your MongoDB configuration:

```bash
mkdir olake-mongodb
cd olake-mongodb
```

#### Step 2: Configure Configuration

Create a file named `source.json` with your MongoDB connection details.

Sample `source.json` file is mentioned below for reference about the structure:

```json
{
  "hosts": ["host1:27017", "host2:27017", "host3:27017"],
  "username": "your_username",
  "password": "your_password",
  "authdb": "admin",
  "replica_set": "rs0",
  "read_preference": "secondaryPreferred",
  "srv": false,
  "database": "your_db",
  "max_threads": 5,
  "backoff_retry_count": 4,
  "chunking_strategy": ""
}
```

| Field | Description | Example Value | Data Type |
|-------|-------------|---------------|-----------|
| `hosts` | List of MongoDB hosts. Use DNS SRV format if `srv = true` | `["x.xxx.xxx.120:27017", "x.xxx.xxx.133:27017"]` | STRING[] |
| `username` | MongoDB authentication username | `"test"` | STRING |
| `password` | MongoDB authentication password | `"test"` | STRING |
| `authdb` | Authentication database name | `"admin"` | STRING |
| `replica_set` | Name of the replica set (if applicable) | `"rs0"` | STRING |
| `read_preference` | MongoDB read preference setting | `"secondaryPreferred"` | STRING |
| `srv` | Enable DNS SRV connection strings. When `true`, only one host allowed | `false` | BOOLEAN |
| `database` | Target MongoDB database name to replicate | `"database_name"` | STRING |
| `max_threads` | Maximum parallel threads for chunk-based snapshotting | `5` | INTEGER |
| `backoff_retry_count` | Number of retry attempts with exponential backoff (defaults to 3 if set to -1) | `4` | INTEGER |
| `chunking_strategy` | Data chunking strategy: `timestamp`, `bucket_auto`, `splitVector`. Defaults to `splitVector` | `"timestamp"` | STRING |

#### Step 3: Run Command of Check

Run the discover command to validate your configuration and generate the streams schema:

**Using Docker:**
```bash
docker run --pull=always \
  -v "$HOME/PATH_TO_OLAKE_DIRECTORY:/mnt/config" \
  olakego/source-mongodb:latest \
  discover \
  --config /mnt/config/source.json
```

‚ö†Ô∏è **Important**: If errors occur during the check command, refer to the **Troubleshooting** section below.

</TabItem>

</Tabs>

---

## Data Type Mapping

The following table shows how MongoDB data types are mapped to Iceberg data types:

| MongoDB Data Types | Iceberg Data Type |
|--------------------|-------------------|
| int<br/>timestamp | int |
| long | bigint |
| None Observed | float |
| double | double |
| boolean | boolean |
| date | timestamp |
| string<br/>object<br/>objectId<br/>binData (binary)<br/>code<br/>regex (BSONRegExp)<br/>decimal128<br/>maxKey<br/>minKey<br/>array<br/>undefined | string |

---

## Troubleshooting

1. **Connection Failed (UI/CLI)**:
    - **Possible Cause**: Wrong host/port, MongoDB not running.
    - **Solution**: Check the port number entered is correct and MongoDB is up and accessible.

2. **CDC not working**:
    - **Possible Cause**: MongoDB not in replica set / oplog not accessible
    - **Solution**: Verify replica set is active by running `rs.status()`

3. **File not found (CLI)**:
    - **Possible Cause**: Not in correct directory while running commands
    - **Solution**: Make sure both source.json is present in correct directory and the commands are executed while inside the directory

---

## ChangeLogs

| Date of Release | Version | Description |
|-------|----------------|----------|
| Aug 27, 2025 | v0.1.11 | [https://github.com/datazip-inc/olake/releases/tag/v0.1.11](https://github.com/datazip-inc/olake/releases/tag/v0.1.11) |
---
