---
title: Setting up a Development Environment
description: Setting up a Development Environment in OLake guide
sidebar_position: 3
---

# Setting up a Development Environment

The documentation in this section is a bit of knowlegde required to run OLake for developement purposes.

**Pre-requisites:**

Before setting up and running OLake, ensure you have the following installed on your system:

<Tabs>
<TabItem value="java" label="Java" default>

<Tabs>
<TabItem value="window_java" label="Windows" default>

Please follow the link to install Java 21 on Windows: [JDK 21](https://www.oracle.com/in/java/technologies/downloads/#jdk21-windows)

</TabItem>

<TabItem value="mac_java" label="macOS" default>
```bash
brew install openjdk@21
```
</TabItem>
</Tabs>

</TabItem>

<TabItem value="go" label="Go">

<Tabs>
<TabItem value="window_java" label="Windows" default>

Please follow the link to install Golang 1.25 on Windows: [Go 1.25](https://go.dev/dl/)

</TabItem>

<TabItem value="mac_java" label="macOS" default>
```bash
brew install go@1.25
```
</TabItem>
</Tabs>

</TabItem>

<TabItem value="Nodejs" label="Node.js">

<Tabs>
<TabItem value="window_java" label="Windows" default>

Please follow the link to install Node.js 22.19.0 on Windows: [Node.js 22.19.0](https://nodejs.org/en/download)

</TabItem>

<TabItem value="mac_java" label="macOS" default>
```bash
brew install node@22
```
</TabItem>
</Tabs>

</TabItem>

<TabItem value="docker" label="Docker">

<Tabs>
<TabItem value="window_docker" label="Windows" default>

Please follow the link to install Docker on Windows: [Docker Desktop](https://docs.docker.com/desktop/setup/install/windows-install/)

</TabItem>

<TabItem value="mac_docker" label="macOS" default>
```bash
  brew install --cask docker
```
</TabItem>
</Tabs>

</TabItem>

</Tabs>


## 1. Source and Destination Setup

Use the following command to quickly spin up the source (Postgres/MongoDB/MySQL) and destination (Iceberg/Parquet Writer) services using Docker Compose. This will download the required docker-compose files and start the containers in the background.

```bash
sh -c 'curl -fsSL https://raw.githubusercontent.com/datazip-inc/olake-docs/fix/contribution/docs/community/docker-compose.yml -o docker-compose.source.yml && \
curl -fsSL https://raw.githubusercontent.com/datazip-inc/olake/fix/contribution-md/destination/iceberg/local-test/docker-compose.yml -o docker-compose.destination.yml && \
docker compose -f docker-compose.source.yml --profile mongo -f docker-compose.destination.yml up -d'
```

## 2. OLake CLI Setup

The diagram below illustrates the high-level architecture of OLake, showing how data flows from various sources to different destinations:

![OLake Architecture](/img/community/setting-up-a-dev-env/architecture_diagram.png)

### Fork and Clone
First, [fork the repository on GitHub](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/about-forks), then clone it. 

Second, you can clone the main repository directly, and raise pull request accordingly.

```bash
git clone git@github.com:datazip-inc/olake.git
```

:::note
- To run OLake CLI commands mentioned below, you must be inside the root directory of the olake repository which we get after cloning `datazip-inc/olake.git`.
```bash
nayan@Nayans-MacBook-Pro olake %
```
- Create `source.json` and `destination.json` files inside this directory.
:::

### Set up Source

<Tabs>
<TabItem value="postgres cli" label="Postgres" default>
**This setup is using the above provided docker compose for Postgres.**
```json title="source.json"
{
  "host": "localhost",
  "port": 5431,
  "database": "main",
  "username": "main",
  "password": "password",
  "jdbc_url_params": {},
  "ssl": {
    "mode": "disable"
  },
  "update_method": {
    "replication_slot": "postgres_slot",
    "initial_wait_time": 120
  },
  "reader_batch_size": 1000,
  "max_threads": 10
}
```
</TabItem>

<TabItem value="mongodb cli" label="Mongodb" default>

**This setup is using the above provided docker compose for MongoDB.**

```json title="source.json"
{
  "hosts": ["localhost:27017"],
  "username": "admin",
  "password": "password",
  "authdb": "admin",
  "replica_set": "rs0",
  "read_preference": "secondaryPreferred",
  "srv": false,
  "database": "reddit",
  "max_threads": 5,
  "backoff_retry_count": 4,
  "chunking_strategy": "splitVector"
}
```

</TabItem>
<TabItem value="mysql cli" label="MySQL" default>

**This setup is using the above provided docker compose for MySQL.**

```json title="source.json"
{
  "hosts": "localhost",
  "username": "root",
  "password": "password",
  "database": "main",
  "port": 3306,
  "update_method": {
    "initial_wait_time": 10
  },
  "tls_skip_verify": true,
  "max_threads": 5,
  "backoff_retry_count": 4
}
```

</TabItem>
<TabItem value="oracle cli" label="Oracle" default>
You can use your own Oracle configuration. The docker compose is **WIP**.
</TabItem>
<TabItem value="cli" label="Kafka" default>
You can use your own Kafka configuration. The docker compose is **WIP**.
</TabItem>
</Tabs>

### Set up Destination

<Tabs>
<TabItem value="iceberg cli" label="Iceberg" default>
**This setup is using the above provided docker compose for Iceberg.**
```json title="destination.json"
{
  "type": "ICEBERG",
  "writer": {
    "catalog_type": "jdbc",
    "jdbc_url": "jdbc:postgresql://localhost:5432/iceberg",
    "jdbc_username": "iceberg",
    "jdbc_password": "password",
    "iceberg_s3_path": "s3a://warehouse",
    "s3_endpoint": "http://localhost:9000",
    "s3_use_ssl": false,
    "s3_path_style": true,
    "aws_access_key": "admin",
    "aws_secret_key": "password",
    "iceberg_db": "olake_iceberg",
    "aws_region": "us-east-1"
  }
}
```
</TabItem>
<TabItem value="parquet cli" label="S3 Parquet" default>
**This setup is using the above provided docker compose for S3 Parquet.**
```json title="destination.json"
{
  "type": "PARQUET",
  "writer": {
    "s3_bucket": "warehouse",
    "s3_region": "us-east-1",
    "s3_access_key": "admin",
    "s3_secret_key": "password",
    "s3_endpoint": "http://localhost:9000",
    "s3_path": ""
  }
}
```
</TabItem>
</Tabs>
To access S3-compatible MinIO, click on [`http://localhost:9001/login`](http://localhost:9001/login), with username = `admin` and password = `password`.



### Commands

:::info
- To better understand the workflow, letâ€™s walk through an example using **Postgres** as the source and the destination as **Iceberg**.
:::

- ### Discover
    Initially you have to run the discover command to get the possible streams of the source. It requires source name and source config path, with command type `discover`.

    ```bash
    ./build.sh driver-postgres discover --config ./source.json
    ```

    If you want to learn more about the streams.json file and how to modify it, refer [here](/docs/install/docker-cli#streams-config)

- ### Sync   

    This below command will generate state.json, having the persisted state of the source and stats.json, having the statistics of the sync.

    Initial sync with no state:

    ```bash
    ./build.sh driver-postgres sync --config ./source.json --catalog ./streams.json --destination ./destination.json
    ```
    
    If want to run sync with state (i.e. with CDC/Incremental enabled), run:
    ```bash
    ./build.sh driver-postgres sync --config ./source.json --catalog ./streams.json --destination ./destination.json --state ./state.json
    ```

    :::tip

    Follow the [Docker CLI](/docs/install/docker-cli) guide for a comprehensive understanding of OLake CLI commands and its usage.

    :::

- ### Query Data after the Sync

    After running the sync command, you can query your data using the Spark Iceberg service available at `localhost:8888`.

    For example, run the following SQL commands to explore your synced data:

    ```bash
    %%sql
    SHOW DATABASES;

    SELECT * FROM olake_iceberg.olake_iceberg.sample_data;
    ``` 

- ### Sync with State enabled

    When running sync with state mode enabled, you can verify Change Data Capture/Incremental functionality by following this example steps below:
    1. Inserting 2 records in the source database and confirm that both the records are replicated in the destination table. To perform this run the below command below in the terminal:
       ```bash
       docker exec -it primary_postgres psql -U main -d main -c "INSERT INTO public.sample_data (id, num_col, str_col) VALUES (10, 100, 'First record'), (20, 200, 'Second record');"
       ```

       Now run the sync command with state mode enabled (mentioned above) so that the new records are replicated to the destination.

       After the sync is completed, you can execute the below command using the Spark Iceberg service to verify that the records are replicated:
       ```bash
        %%sql
        SELECT * FROM olake_iceberg.olake_iceberg.sample_data;
        ```
        You can notice that the op_type for these records will indicate `"c"` for created.


    2. Updating 1 record in the source database and observing corresponding update in the destination table. To perform this run the following command below in the terminal:

       ```bash
       docker exec -it primary_postgres psql -U main -d main -c "UPDATE public.sample_data SET num_col = 150, str_col = 'First record updated' WHERE id = 1;"
        ```

       Now run the sync command with state mode enabled (mentioned above) so that the new records are replicated to the destination.
       
       After the sync is completed, you can execute the below command using the Spark Iceberg service to verify that the records are replicated:
       ```bash
        %%sql
        SELECT * FROM olake_iceberg.olake_iceberg.sample_data;
        ```
        You can notice that the op_type for this record will indicate `"u"` for updated.

    3. Deleting 2 records in the source database and confirming the records reflect the deletion in the destination. To perform this run the following commands below in psql terminal:

       ```json title="sql"
       docker exec -it primary_postgres psql -U main -d main -c "DELETE FROM public.sample_data WHERE id IN (1, 10);"
        ```
       Now run the sync command with state mode enabled (mentioned above) so that the new records are replicated to the destination.

       After the sync is completed, you can execute the below command using the Spark Iceberg service to verify that the records are replicated:
       ```bash
        %%sql
        SELECT * FROM olake_iceberg.olake_iceberg.sample_data;
        ```
        You can notice that the op_type for these records will indicate `"d"` for deleted (with other fields as NONE)

## 3. OLake UI Setup

**UI setup: Work in progress (coming soon).**

## Debug Mode
If you don't want to run the sync commands after every change, we have this debugger mode for Go side of code.
:::caution
If using the Iceberg as destination, you have to generate the jar file for Java side of code. To generate the jar file either run the sync command once or run `mvn clean package -DskipTests`.
:::

**Assumptions: You are using [VSCode](https://code.visualstudio.com/download) to run OLake locally.**

### Steps to Debug
- Make a directory `.vscode` (inside OLake project, at root location) if not already created.
- Create a file named `launch.json` inside the `.vscode` directory and paste the beflow config.

```json title=".vscode/launch.json"
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Launch Go Code",
            "type": "go",
            "request": "launch",
            "program": "{PATH_TO_UPDATE}/drivers/{source-name}/main.go",
            "mode": "auto",
            "args": [
                "sync",
                "--config",
                "{PATH_TO_UPDATE}/drivers/{source-name}/examples/source.json",
                "--catalog",
                "{PATH_TO_UPDATE}/drivers/{source-name}/examples/streams.json",
                "--destination",
                "{PATH_TO_UPDATE}/drivers/{source-name}/examples/destination.json",
                // "--state",
                // "{PATH_TO_UPDATE}/drivers/{source-name}/examples/state.json",
            ]
        }
    ]
}
```

### Params:
| key | value(s) |
| --- | --- |
|`mode` | `auto`, `debug` |
| `args` | `sync` , `discover`, `check` |

Update `PATH_TO_UPDATE` with the location where OLake project lives inside your system. For example:

```json
"program": "/Users/john/Desktop/projects/olake/drivers/mongodb/main.go",
...
    "--config",
    "/Users/john/Desktop/projects/olake/drivers/mongodb/examples/source.json",
...          
```
Now, setup debug points in the codebase and click "Launch Go Code".

![Debug](/img/docs/getting-started/debug.webp)


<YouTubeEmbed videoId="b7tQmWe3wmw" className="max-w-6xl" />








