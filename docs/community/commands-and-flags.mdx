---
title: "OLake CLI Commands & Flags Reference | Developer Guide"
description: Issues and Pull Request Guidelines
sidebar_label: Commands and Flags
sidebar_position: 2
---

# OLake Commands and Flags

OLake provides a set of CLI commands, each designed for specific use cases. <br/>


**Commands can be executed in three ways:**
- Using the `build.sh` script
- Running the generated binary
- Through the [OLake Docker CLI](/docs/install/docker-cli).

```bash title="build.sh command"
./build.sh driver-[SOURCE-TYPE] [COMMAND] [FLAG]
```
:::warning Compatibility
The `./build.sh` script is a Unix shell script. It runs natively on Linux and macOS terminals.

For Windows:
- Use Git Bash, WSL (Windows Subsystem for Linux), or another Unix-like shell.
- Alternatively, use the OLake Docker CLI, which works consistently across platforms.
:::

**Explanation of placeholders:**
- **SOURCE-TYPE** → The source driver being used.
- **COMMAND** → The action to perform (listed in the sections below).
- **FLAG** → Additional configuration for fine-tuning the command.

:::info Using the binary
Executing build.sh creates a binary file in the configuration directory.<br/>
Once available, the binary can be called directly to run commands, without needing build.sh.
:::

## Commands

### 1. Check

```
./build.sh driver-[SOURCE-TYPE] check [FLAG]
```
#### Description:
Verifies the connection to either a source or a destination.

#### Required flags:
Only one among these is required:
- [**`--config`**](/docs/community/commands-and-flags#2-config) → Checks the connection to a source.
- [**`--destination`**](/docs/community/commands-and-flags#4-destination) → Checks the connection to a destination.


### 2. Spec
```
./build.sh driver-[SOURCE-TYPE] spec [FLAG]
```
#### Description:
Generates a JSON Schema and UI Schema. These schemas are used by [RJSF](https://rjsf-team.github.io/react-jsonschema-form/docs/) to render and validate configuration forms. <br/>
When no flag is provided, the spec of the defined `SOURCE-TYPE` is generated.

#### Optional flags:
- [**`--destination-type`**](/docs/community/commands-and-flags#8-destination-type) → Generates the spec for a destination driver instead of the source.<br/>
    example:
    ```
    ./build.sh driver-mysql spec --destination-type iceberg
    ```

<DiscoverCommand command="discover" headingLevel={3} />

<DiscoverCommand command="sync" headingLevel={3} />

---

## Flags

### 1. Help
```
./build.sh driver-[DRIVER_NAME] --help
```
#### Description:
- Lists all available commands and flags for the current OLake CLI version.
- Can be run without specifying a command.
- The shorthand `-h` can also be used.


### 2. Config
```
./build.sh driver-[SOURCE-TYPE] [COMMAND] --config [PATH_TO_CONFIG_FILE]
```
**Description:** 
- Specifies the path to the source configuration file.
- For details about configuration files for different sources, see:
    - [MongoDB Config file](/docs/connectors/mongodb#2-provide-configuration-details-1)
    - [MySQL Config file](/docs/connectors/mysql#2-provide-configuration-details-1)
    - [Oracle Config file](/docs/connectors/oracle#2-provide-configuration-details-1)
    - [PostgreSQL Config file](/docs/connectors/postgres#2-provide-configuration-details-1)

<StreamsFlag flag="streams" headingLevel={3} />

### 4. Destination
```
./build.sh driver-[SOURCE-TYPE] [COMMAND] --destination [PATH_TO_DESTINATION_FILE]
```
**Description:**
- Specifies the path to the destination configuration file.
- For details about destination configuration files, see:
    - [AWS Glue Catalog configuration](/docs/writers/iceberg/catalog/glue#configuration)
    - [REST Catalog configuration](/docs/writers/iceberg/catalog/rest)
    - [JDBC Catalog configuration](/docs/writers/iceberg/catalog/jdbc#configuration)
    - [Hive Catalog configuration](/docs/writers/iceberg/catalog/hive#configuration)
    - [Parquet configuration](/docs/writers/parquet/config#configuration)

### 5. State 
```
./build.sh driver-[SOURCE-TYPE] [COMMAND] --state [PATH_TO_STATE_FILE]
```
**Description:**  
- Specifies the path to the state file. 
- The state file contains metadata (such as offsets and positions) that enables:
   - Resuming interrupted syncs.
   - Continuing incremental or CDC syncs without restarting from scratch.

The `state.json` file is organized into two main sections:

#### 1. Global State

The **`global`** section contains global state information that applies to all streams anddriver-specific replication metadata that tracks the overall position in the source database's change log. The structure varies by database driver:

<Tabs>
<TabItem value="mysql_global" label="MySQL" default>
MySQL uses **binlog position** for global state tracking to maintain the replication position across all streams.

```json title="state.json (MySQL)"
{
  "type": "STREAM",
  "version": 1,
  "global": {
    "state": {
      "server_id": 261398335,
      "state": {
        "position": {
          "Name": "mysql-bin.000070",
          "Pos": 811746
        }
      }
    },
    "streams": [
      "my_db.decimal_test",
      "my_db.incr_test"
    ]
  }
}
```
</TabItem>

<TabItem value="postgres_global" label="PostgreSQL">
PostgreSQL uses **LSN (Log Sequence Number)** for global state tracking to maintain the replication position across all streams.

```json title="state.json (PostgreSQL)"
{
  "type": "STREAM",
  "version": 1,
  "global": {
    "state": {
      "lsn": "BD7/650015C8"
    },
    "streams": [
      "public.sample_data",
      "public.employees"
    ]
  }
}
```
</TabItem>

<TabItem value="mongodb_global" label="MongoDB">
MongoDB does not use a global state section. The state is maintained at the stream level only.
</TabItem>
</Tabs>

#### 2. Streams State

The **`streams`** section is an array where each element tracks the synchronization state for a specific stream. The structure varies by database driver:

<Tabs>
<TabItem value="mysql_postgres_streams" label="MySQL & PostgreSQL" default>
Each stream state object contains:

```json title="state.json"
{
  "stream": "table1",
  "namespace": "my_db",
  "sync_mode": "",
  "state": {
    "chunks": []
  }
}
```
</TabItem>

<TabItem value="mongodb_streams" label="MongoDB">
MongoDB stream state includes a `_data` field that stores the resume token:

```json title="state.json (MongoDB)"
{
  "stream": "users",
  "namespace": "public",
  "sync_mode": "",
  "state": {
    "_data": "82696F0837000000012B0429296E1404",
    "chunks": []
  }
}
```
</TabItem>
</Tabs>

#### State Configuration Elements

| **Component**                    | **Type** | **Example Value**                                | **Description**                                                                                                                                               |
|----------------------------------|----------|--------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **`version`**                    | integer  | `1` or `0`                                              | Version `0` enables legacy, lenient handling for backward compatibility <br/> Version `1` and above enforce stricter validation and fail-fast behavior for newly created state                                                                      |
| **`global`**                     | object   | For postgres : <br/>`"global": { "state" : { "lsn": "BD7/650015C8" }, "streams": [ "public.sample_data", "public.employees" ] }`                           | Contains global replication metadata. Structure varies by driver: MySQL uses binlog position, PostgreSQL uses LSN, MongoDB does not have a global section.  |
| **`global.state.server_id`**    | integer  | `261398335`                                      | **(MySQL only)** The MySQL server ID used for replication tracking.                                                                                          |
| **`global.state.state.position`**| object   | `{"Name": "mysql-bin.000070", "Pos": 811746}`    | **(MySQL only)** Tracks the current binlog file name and position for CDC replication.                                                                        |
| **`global.state.lsn`**           | string   | `"BD7/650015C8"`                                 | **(PostgreSQL only)** Log Sequence Number (LSN) that tracks the position in the PostgreSQL write-ahead log (WAL) for CDC replication.                       |
| **`global.streams`**             | array    | `["public.decimal_test", "public.incr_test"]`        | List of all streams that are being tracked in this state file.                                                            |
| **`stream`**                     | string   | `"decimal_test"`, `"incr_test"`                            | The name of the stream being tracked. Must match the stream name defined in `streams.json`.                                                                   |
| **`namespace`**                  | string   | `"my_db"`, `"public"`                  | The namespace (database/schema) that the stream belongs to.                                                                                                    |
| **`sync_mode`**                  | string   | `""`, `"incremental"`, `"cdc"`                   | The synchronization mode being used for this stream. May be empty if not explicitly set.                                                                      |
| **`state.chunks`**               | array    | `[]`                                             | Array tracking data chunks that have been processed. Used for resuming partial syncs and managing large data transfers.                                       |
| **`state._data`**                | string   | `"82696F0837000000012B0429296E1404"`             | **(MongoDB only)** Resume token used to track the position in MongoDB's change stream for CDC replication.                                                    |

**What's Next**: The state file is automatically created and updated during sync operations. You can manually specify a state file using the [`--state`](/docs/community/commands-and-flags#5-state) flag to resume from a previous synchronization point.

### 6. Clear Destination
```
./build.sh driver-[SOURCE-TYPE] [COMMAND] --clear-destination
``` 
**Description:** 
- Clears data in the destination, only for the selected streams defined in `streams.json`.
- Resets the state file for those streams.

### 7. Destination database prefix
```
./build.sh driver-[SOURCE-TYPE] [COMMAND] --destination-database-prefix [PREFIX_TO_ADD]
```
**Description:** 
- Adds a custom prefix to the database name created in the destination.<br/>
    Example: 
    ```
    ./build.sh driver-mysql discover --config [PATH_TO_SOURCE_CONFIG_FILE] --destination-database-prefix olake
    ```
       If the source database is `sales-db` and the driver is `mysql`:
        - **Default (Normalized)** → `mysql_sales_db`
        - **With prefix (Normalized)** → `olake_sales_db`

### 8. Destination type
```
./build.sh driver-[SOURCE-TYPE] [COMMAND] --destination-type [TYPE_OF_DESTINATION]
```
**Description:** 
- Used with the [`spec`](#2-spec) command to generate JSON Schema and UI Schema for the specified destination.
- `TYPE_OF_DESTINATION` can be any OLake supported destination, for example: iceberg or parquet.

### 9. Decryption of configuration files
```
./build.sh driver-[SOURCE-TYPE] [COMMAND] --encryption-key [DECRYPTION_KEY]
```
**Description:** 
- Provides a key for OLake to decrypt encrypted configuration files during execution.
- Supported values include KMS keys, UUIDs, or custom strings.
- The flag must follow the encrypted file in the command.<br/>
    Example: 
    ```
    ./build.sh driver-mysql check config [PATH_TO_SOURCE_CONFIG_FILE] --encryption-key hello-world
    ```
    In this case, if the source config file is encrypted, OLake uses the provided key (`hello-world`) to decrypt and parse it.


### 10. No Save
```
./build.sh driver-[SOURCE-TYPE] [COMMAND] --no-save
```
**Description:** 
- Prevents saving of any files generated by the command. This flag is valid for all available commands.
- Example: If used with discover, the `streams.json` file and related logs are not saved.

### 11. Timeout
```
./build.sh driver-[SOURCE-TYPE] [COMMAND] --timeout [TIMEOUT_IN_SECONDS]
```
**Description:** 
- Applies only to the discover command.
- Overrides the default timeout of 300 seconds (5 minutes).
- This is helpful when working with large datasets or slower networks where the operation may need extra time to complete.



