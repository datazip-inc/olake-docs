---
title: 5. CDC in Standalone Mode 
description: CDC in Standalone Mode
sidebar_position: 5
---


# MySQL Connector – Enabling CDC for Standalone Mode

For a self-hosted or on-premises MySQL server (or MySQL on a VM), enabling CDC means configuring the MySQL server’s binary logging and privileges appropriately. This is essentially making MySQL act like a source for replication, where the CDC tool is a replication client reading the binary logs.

**Prerequisites:**

- MySQL Server 5.6 or higher (preferably 5.7 or 8.0 for better JSON support) installed on a server you control.
- Administrative (root) access to MySQL and the ability to edit the my.cnf and restart the server.
- Sufficient disk space for binary logs (since they will accumulate between purges).

**Steps:**

1. **Enable Binary Logging in MySQL Configuration:** Open the MySQL configuration file (often `/etc/my.cnf` or `/etc/mysql/mysql.conf.d/mysqld.cnf` on Linux). Under the `[mysqld]` section, add or modify the following:
   - `server-id = 1` (or any positive integer unique within your replication environment). MySQL requires a server-id != 0 to enable replication features.
   - `log_bin = mysql-bin` (this sets the base name for binlog files; you can also specify a path if desired, e.g., `log_bin=/var/lib/mysql/mysql-bin`).
   - `binlog_format = ROW` (use row-based logging for CDC) ([How To: Set up a MySQL CDC connection on Amazon RDS](https://docs.decodable.co/howto/how-to-set-up-an-aws-aurora-mysql-cdc-connection.html#:~:text=1,Amazon%20RDS%29%20console)).
   - `binlog_row_image = FULL` (so the full row is logged) ([How To: Set up a MySQL CDC connection on Amazon RDS](https://docs.decodable.co/howto/how-to-set-up-an-aws-aurora-mysql-cdc-connection.html#:~:text=mysql,)).
   - `expire_logs_days = 7` (for MySQL 5.7 and below) or `binlog_expire_logs_seconds = 604800` (7 days in seconds, for MySQL 8.0+). Adjust retention as needed. This is the automated purge; you can also manage purging manually.
   - (Optional) `max_binlog_size = 256M` (or any size, default is 1GB). This is just to control individual file size.
   - Save the config and restart the MySQL service.

   After restart, confirm MySQL is running and then verify:
   ```sql
   SHOW VARIABLES LIKE 'log_bin';
   SHOW VARIABLES LIKE 'binlog_format';
   ```
   They should show ON and ROW respectively.

   - *Screenshot:* The my.cnf configuration snippet highlighting the binlog settings.

2. **Create a Replication-Privileged User:** Connect to MySQL as root:
   ```sql
   CREATE USER 'cdc_user'@'%' IDENTIFIED BY 'strongpassword';
   GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'cdc_user'@'%';
   GRANT SELECT ON *.* TO 'cdc_user'@'%';
   FLUSH PRIVILEGES;
   ```
   - `REPLICATION SLAVE` allows the user to connect and stream the binary log.
   - `REPLICATION CLIENT` allows the user to check master status and binlog events.
   - `SELECT` is given globally in case the CDC tool does an initial snapshot by reading tables.
   - Ensure the user host `'%'` suits your needs (you might restrict it to a specific IP or hostname from which the CDC app will connect for better security).

   - *Screenshot:* MySQL CLI showing the user creation and grants.

3. **Test Binary Logging Setup:** On the MySQL server:
   - Check that binary logging is active:
     ```sql
     SHOW MASTER STATUS;
     ```
     This should output a binlog file name and position. If it’s empty or says “Binary logging not enabled”, double-check the config and restart steps (especially server-id).
   - Create a small test:
     ```sql
     CREATE DATABASE cdc_test;
     USE cdc_test;
     CREATE TABLE t1(id INT PRIMARY KEY, name VARCHAR(50));
     INSERT INTO t1 VALUES(1, 'foo');
     ```
     Now check the binary log to see if the insert was logged. You can do:
     ```
     mysqlbinlog -vv --base64-output=DECODE-ROWS /path/to/mysql-bin.000001 | head -30
     ```
     (Adjust the path and file name to your actual binlog file). You should see the statement or a ROW event decoding that insert.
     Or use SQL:
     ```sql
     SHOW BINLOG EVENTS IN 'mysql-bin.000001' LIMIT 10;
     ```
     If you see events for the CREATE TABLE and INSERT (in a row-event form), things are working.

4. **Connect the CDC Connector:** On your CDC application (Debezium, Maxwell, etc.), configure the connection:
   - Host = the MySQL server address (and port if not default 3306).
   - User = `cdc_user`, Password as set.
   - Ensure the connector knows to use the binary log. Debezium, for instance, will automatically use the binlog via MySQL replication protocol. Maxwell (another binlog reader) similarly connects as a replica.
   - If using Debezium, you might set `snapshot.mode=initial` (to do an initial snapshot) or `when_needed` (default). The user has SELECT so that will work.
   - Start the CDC connector and monitor its logs for successful connection. You should see it reading events or at least an initial snapshot.

5. **Tune Binlog Retention (Ongoing):** With `expire_logs_days` or `binlog_expire_logs_seconds` set, MySQL will auto-purge old binlogs. Ensure this window is >= the maximum downtime of your CDC consumer. If your CDC tool might be down for, say, up to 2 days, ensure you keep at least 2 days of binlogs. Alternatively, you can manage purging manually with:
   ```sql
   PURGE BINARY LOGS TO 'mysql-bin.00xxx';
   ```
   But auto-expire is simpler as long as you set it generously. You can always purge manually if disk gets full.

**Troubleshooting:**

- **MySQL won’t start after enabling binlog:** If MySQL fails to start or gives error on startup after config change:
  - Make sure `server-id` is set. MySQL does not allow `log_bin` = ON with `server-id = 0`. Setting server-id to 1 (or any non-zero) is required.
  - Check file permissions for the binlog directory. If you set a custom path for `log_bin`, ensure the mysql OS user can write there.

- **No binary log files created:** If `SHOW MASTER STATUS` is empty:
  - Possibly no transactions have been committed since startup. The binlog is created on first write. Try the test insert as above.
  - Ensure `log_bin` indeed is ON (check `SHOW VARIABLES6. **Verify MySQL Binlog is Enabled:** To double-check everything on standalone:
   ```sql
   SHOW VARIABLES LIKE 'log_bin';
   ```
   should say ON, and:
   ```sql
   SHOW MASTER STATUS;
   ```
   should show a valid log file name and position (if you have done at least one transaction). Also ensure:
   ```sql
   SHOW VARIABLES LIKE 'binlog_format';
   ```
   returns ROW.

- **CDC user cannot connect / privileges issues:** If your CDC tool fails to connect:
  - Try a manual connection using the same credentials: `mysql -ucdc_user -p -hhostname`. If that fails, check user exists and host '%' is correct (perhaps the connector is actually connecting from localhost? In that case, MySQL might require 'cdc_user'@'localhost' or treat socket connections differently).
  - If connecting but getting "Access denied" for replication, ensure the user has REPLICATION SLAVE (for binlog dump).
  - If initial snapshot fails due to lack of SELECT, we gave global SELECT. If you wanted to restrict SELECT to specific databases, you could, but then ensure the connector only reads those DBs.
  
- **Binlog not in ROW format:** If somehow `binlog_format` is still STATEMENT or MIXED after restart, the config change didn't apply. Check that there is no config file conflict or that you edited the correct my.cnf. Also note that some Linux distributions might have duplicate mysqld sections. Use `mysqld --verbose --help | grep -A1 "Default options"` to see which config files it reads.

- **Disk space and purge:** Monitor the directory where binlogs are stored (usually /var/lib/mysql). If you see many binlog files accumulating beyond your expire_logs_days, it could be:
  - The server might not purge because the logs are still needed by a replication client (even if expire date passed, MySQL won’t delete if a replica or a replication client is still reading them).
  - If your CDC connector is far behind, the `SHOW SLAVE (or MASTER) STATUS` on the *source* can show what binlog positions are still needed. Actually, since the CDC is not a MySQL replica in the traditional sense (it's just reading via replication protocol), MySQL doesn’t track its progress as it would a replica’s. So auto-purge should still work based on date.
  - If not purging, you can script `PURGE BINARY LOGS` in cron to manage size more aggressively if needed.

- **Replication Filter Considerations:** If you only want to capture certain databases, Debezium can filter. But if you wanted MySQL itself to only log certain things: MySQL binlog can be filtered via `binlog_do_db` or `binlog_ignore_db` in config. However, be careful: those apply at session level in a way (they filter based on default database), and Debezium expects all changes to be in the log (it will filter on its side anyway). It's generally better to log everything and let the CDC tool discard what it doesn't need, unless there's a high volume of irrelevant changes.

- **Time Zone / Row Format:** Debezium and other connectors can have issues if the server's time zone or character set is unusual. It's advisable to set `binlog_row_image=FULL` (we did) to avoid missing columns, and ensure server time_zone is something standard like UTC (especially for Debezium, which will convert temporal types possibly). Check `SELECT @@global.time_zone, @@session.time_zone;`.

- **Testing end-to-end:** Insert a test row into a table and see if it shows up in your CDC consumer output. That’s the ultimate verification that all is well.

A standalone MySQL configured this way is now ready for CDC. It will write all data changes to its binary log in row format, which your CDC connector will read and convert to events for downstream processing. This is the foundation for building reliable data pipelines from MySQL to other systems in real-time.